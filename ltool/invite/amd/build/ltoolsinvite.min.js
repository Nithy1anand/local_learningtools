define ("ltool_invite/ltoolsinvite",["jquery","core/modal_factory","core/str","core/fragment","core/modal_events","core/ajax","core/notification"],function(a,b,c,d,e,f,g){function h(a){i(a)}function i(a){var d=document.querySelector(".ltoolinvite-info #ltoolinvite-action");if(d){d.addEventListener("click",function(){b.create({title:l(a),type:b.types.SAVE_CANCEL,body:k(a),large:!0}).then(function(b){b.setSaveButtonText(c.get_string("invitenow","local_learningtools"));b.show();b.getRoot().on(e.hidden,function(){b.destroy()});b.getRoot().on(e.save,function(c){c.preventDefault();j(b,a);b.getRoot().submit()});return b}).catch(g.exception)})}}function j(b,d){var e=document.querySelectorAll("#invite-users-area form")[0],h=new URLSearchParams(new FormData(e)).toString(),i=JSON.stringify(d);f.call([{methodname:"ltool_invite_inviteusers",args:{params:i,formdata:h},done:function done(e){b.hide();if(e){var f=c.get_string("successinviteusers","local_learningtools");a.when(f).done(function(a){g.addNotification({message:a,type:"success"})});var h=M.cfg.wwwroot+"/local/learningtools/ltool/invite/list.php?id="+d.user+"&courseid="+d.course;window.open(h,"_self")}}}])}function k(a){return d.loadFragment("ltool_invite","get_inviteusers_form",a.contextid,a)}function l(a){var b="<p>"+a.strinviteusers+"</p>",c=M.cfg.wwwroot+"/local/learningtools/ltool/invite/list.php?id="+a.user+"&courseid="+a.course;b+="<div id='list-action-url'><a href='"+c+"' target='_blank'>"+a.strinvitelist+"</a></div>";return b}return{init:function init(a){h(a)}}});
//# sourceMappingURL=ltoolsinvite.min.js.map
